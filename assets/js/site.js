(() => {const y=document.querySelector('[data-year]');if(y)y.textContent=new Date().getFullYear();document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',e=>{const h=a.getAttribute('href');if(!h||h==='#')return;const el=document.querySelector(h);if(!el)return;e.preventDefault();el.scrollIntoView({behavior:'smooth',block:'start'});history.pushState(null,'',h);});});const form=document.querySelector('[data-mailto-form]');if(form){form.addEventListener('submit',e=>{e.preventDefault();const to=form.getAttribute('data-mailto-to')||'';const subject=encodeURIComponent(form.getAttribute('data-mailto-subject')||'Tow Request');const get=n=>form.querySelector(`[name="${n}"]`)?.value?.trim()||'';const body=encodeURIComponent([`Name: ${get('name')}`,`Phone: ${get('phone')}`,`Location: ${get('location')}`,`Vehicle: ${get('vehicle')}`,`Drop-off: ${get('destination')}`,'',`Details:\n${get('details')||'(none)'}`].join('\n'));if(!to||to.includes('yourdomain.com')){alert('This site is configured without a real inbox. Replace the email in /contact.html or call dispatch.');return;}window.location.href=`mailto:${to}?subject=${subject}&body=${body}`;});}})();
